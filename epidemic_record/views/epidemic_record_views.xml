<?xml version="1.0" encoding="UTF-8" ?>

<odoo>
    <!-- tree视图(列表视图) -->
    <record id="epidemic_record_tree_view" model="ir.ui.view">
        <field name='name'>疫情记录</field>
        <field name="model">epidemic.record</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="date"/>
                <field name="state"/>
                <field name="city"/>
                <field name="county"/>
                <field name="street"/>
                <field name="ill_type"/>
                <field name="within_or_abroad"/>
            </tree>
        </field>
    </record>

    <!--  疫情记录form视图  -->
    <record id="epidemic_record_from_view" model="ir.ui.view">
        <field name="name">疫情记录详情</field>
        <field name="model">epidemic.record</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="测试按钮1" type='object' class="oe_highlight" name="my_unlink"/>
                    <button string="搜索按钮" type="object" class="oe_highlight" name="my_search"/>
                    <button string="创建或修改" type="object" class="oe_highlight" name="create_or_write"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name" string="姓名" required="1"/>
                            <field name="is_ill" string="是否确诊"/>
                            <field name="within_or_abroad" string="境内/境外" required="1"/>
                            <field name="begin_lsolation_date" string="起始隔离日期" attrs="{'required': [('is_ill', '=', False)], 'invisible': [('is_ill', '=', True)]}"/>
                            <field name="lsolation_mode" string="隔离方式" attrs="{'required': [('is_ill', '=', False)], 'invisible': [('is_ill', '=', True)]}"/>
                            <field name="ill_type" string="感染方式" attrs="{'required': [('is_ill', '=', True)] ,'invisible': [('is_ill', '=', False)]}"/>
                            <field name="date" string="确诊日期" attrs="{'required': [('is_ill', '=', True)], 'invisible': [('is_ill', '=', False)]}"/>
                        </group>

                        <group>
                            <field name="state" string="省份" required="1"/>
                            <field name="city" string="市" required="1"/>
                            <field name="county" string="县/区"/>
                            <field name="street" string="详细地址" required="1"/>
                            <field name="create_user_id" string="填报人" readonly="1"/>
                            <field name="fuzhu_create_user_ids" widget="many2many_tags" options="{'no_create': True, 'no_edit': True}" string="辅助填报人"/>
                            <field name="test_float" string="浮点数"/>
                            <field name="test_int" string="整数"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="说明">
                            <field name="note" placeholder="其他信息"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>

    </record>

    <!--  疫情记录搜索视图  -->
    <record id="epidemic_record_search_view" model="ir.ui.view">
        <field name="name">疫情记录搜索项</field>
        <field name="model">epidemic.record</field>
        <field name="arch" type="xml">
            <search>
                <!-- 默认搜索项 -->
                <field name="name" string="姓名"/>
                <field name="state" string="省份"/>
                <!-- 筛选项 -->
                <filter string="已确诊" name="is_ill" domain="[('is_ill', '=', True)]"/>
                <filter string="未确诊" name="is_ill" domain="[('is_ill', '=', False)]"/>
                <!-- 分组 -->
                <group expand="1">
                    <filter string="是否确诊" name="is_ill" context="{'group_by': 'is_ill'}"/>
                    <filter string="填报人" name="create_user_id" context="{'group_by': 'create_user_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- 透视表-->
    <record id="epidemic_record_pivot_view" model="ir.ui.view">
        <field name="name">疫情记录透视表</field>
        <field name="model">epidemic.record</field>
        <field name="arch" type="xml">
            <pivot disable_linking="True" default_order="test_float desc">
                <field name="is_ill" type="row" string="是否确诊"/>
                <field name="begin_lsolation_date" type="row" interval="day"/>
                <field name="test_float" type="measure" string="测试浮点数"/>
                <field name="test_int" type="measure" string="测试整型数"/>
            </pivot>
        </field>
    </record>

    <!-- graph视图表 -->
    <record id="epidemic_record_graph_view" model="ir.ui.view">
        <field name="name">疫情记录图表视图</field>
        <field name="model">epidemic.record</field>
        <field name="arch" type="xml">
            <graph type="pie">
                <field name="state" type="row"/>
                <field name="test_int" type="measure"/>
            </graph>
        </field>

    </record>

    <!-- action操作视图 -->
    <record id="epidemic_record_act_window" model="ir.actions.act_window">
        <field name="name">疫情记录</field>
        <field name="res_model">epidemic.record</field>
        <field name="view_mode">tree,form,pivot,graph</field>
    </record>

    <!-- 一级菜单 -->
    <menuitem name="疫情记录"
              id="epidemic_record_menu_root"
              groups="base.group_user"
              sequence="10"/>

    <!-- 二级菜单 -->
    <menuitem name="疫情记录"
              id="sec_epidemic_record_menu"
              parent="epidemic_record.epidemic_record_menu_root"
              action="epidemic_record_act_window"
              sequence="10"/>
</odoo>
